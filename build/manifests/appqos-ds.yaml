apiVersion: v1
kind: Service
metadata:
  name: appqos-subdomain
spec:
  selector:
    name: appqos-pod
  clusterIP: None
---
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: appqos
  namespace: system
spec:
  selector:
    matchLabels:
      name: appqos-pod
  template:
    metadata:
      name: appqos-pod-silpixa00401062
      namespace: system
      labels:
        name: appqos-pod
    spec:
      hostname: appqos-hostname
      subdomain: appqos-subdomain
      containers:
        - image: 'appqos:latest'
          imagePullPolicy: IfNotPresent
          name: appqos
          ports:
          - containerPort: 5000
          volumeMounts:
          - mountPath: /etc/certs/
            name: certs
          - mountPath: /appqos_workspace/appqos/ca
            name: conf
          - mountPath: /dev
            name: dev
          securityContext:
            privileged: true
      volumes:
      - name: certs
        hostPath:
          path: /etc/certs/
      - name: conf
        hostPath:
          path: /opt/intel/appqos_ca
      - name: dev
        hostPath:
          path: /dev
      nodeSelector:
        "feature.node.kubernetes.io/appqos-node": "true"
